"use strict";!function(e){function t(e){e.getData(s)}var s="data/adventure.json";e.module("textAdventureApp",[]).run(["GameData",t])}(angular),function(e){function t(e,t){var n=this;this.loaded=!1,this.results=[],e.$on("MESSAGE",function(e,t){var a={command:t.command,userMessage:t.userMessage,response:t.response,state:t.state};n.results.push(a),setTimeout(function(){s.scrollTop=s.scrollHeight},500)}),e.$on("LOADED",function(e){n.loaded=!0})}var s=document.getElementById("game-response");e.module("textAdventureApp").controller("ResponseController",["$scope","MessageData",t])}(angular),function(e){function t(e){var t=this;this.currentRequest="",this.userCommands=[],this.submitRequest=function(){t.currentRequest&&(e.prepMessage(t.currentRequest),t.userCommands.push(t.currentRequest),t.currentRequest="")}}e.module("textAdventureApp").controller("UserController",["MessageData",t])}(angular),function(e){function t(e,t){return{getData:function(n){t.get(n).success(function(t){s=t,e.$broadcast("LOADED",{data:t})})}}}var s;e.module("textAdventureApp").factory("GameData",["$rootScope","$http",t])}(angular),function(e){function t(e){var t={prepMessage:function(e,t){for(var s=t||"Nothing happens...",r=!1,o=0;o<n.length;o++)if("starts"===n[o].type&&e.toLowerCase().substring(0,n[o].input.length)===String(n[o].input)||"exact"===n[o].type&&e.toLowerCase()===n[o].input){r=!0;for(var u=0;u<a.length;u++)a[u].name===n[o].responses&&(s=a[u].outputs[parseInt(n[o].current)].text,s=s.replace("{{message}}",e.replace("Say ","")))}var c={command:!0,userMessage:e,response:s,state:r};return this.sendMessage(c),c},sendMessage:function(t){e.$broadcast("MESSAGE",t),this.message=!1},setCommands:function(e){n=e},setResponses:function(e){a=e}};return e.$on("LOADED",function(e,n){n=n.data||n,s=n,t.setCommands(n.commands),t.setResponses(n.responses),t.prepMessage(n.intro||"Hello...",n.startmessage||"...")}),t}var s,n,a;e.module("textAdventureApp").factory("MessageData",["$rootScope",t])}(angular);