"use strict";!function(e){function t(e){e.getData(s)}var s="/data/adventure.json";e.module("textAdventureApp",[]).run(["GameData",t])}(angular),function(e){function t(e,t){var s=this;this.loaded=!1,this.results=[],e.$on("MESSAGE",function(e,t){var n={command:t.command,userMessage:t.userMessage,response:t.response};s.results.push(n)}),e.$on("LOADED",function(e){s.loaded=!0})}e.module("textAdventureApp").controller("ResponseController",["$scope","MessageData",t])}(angular),function(e){function t(e){var t=this;this.currentRequest="",this.userCommands=[],this.submitRequest=function(){t.currentRequest&&(e.prepMessage(t.currentRequest),t.userCommands.push(t.currentRequest),t.currentRequest="")}}e.module("textAdventureApp").controller("UserController",["MessageData",t])}(angular),function(e){function t(e,t){return{getData:function(n){t.get(n).success(function(t){s=t,e.$broadcast("LOADED",{data:t})})}}}var s;e.module("textAdventureApp").factory("GameData",["$rootScope","$http",t])}(angular),function(e){function t(e){var t={prepMessage:function(e){for(var t="Nothing happens...",s=!1,r=0;r<n.length;r++)if(e.toLowerCase().substring(0,n[r].input.length)===n[r].input){s=!0,console.log(a);for(var o=0;o<a.length;o++)a[o].name===n[r].responses&&(t=a[o].outputs[parseInt(n[r].current)].text,t=t.replace("{{message}}",e.replace("Say ","")))}var u={userMessage:e,response:t,state:s};return this.sendMessage(u),u},sendMessage:function(t){e.$broadcast("MESSAGE",t),this.message=!1},setCommands:function(e){n=e},setResponses:function(e){a=e}};return e.$on("LOADED",function(e,n){n=n.data||n,s=n,t.setCommands(n.commands),t.setResponses(n.responses),t.prepMessage(n.intro||"Hello...")}),t}var s,n,a;e.module("textAdventureApp").factory("MessageData",["$rootScope",t])}(angular);